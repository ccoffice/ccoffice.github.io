(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["liquidity"],{"228e":function(t,i,a){t.exports=a.p+"img/plus.08d1d6fa.png"},"4e25":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,".liquidity[data-v-db6ad4c6]{padding:37px 35px 71px}.liquidity>.title[data-v-db6ad4c6]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;color:#333;font-size:18px;line-height:24px;font-weight:700}.liquidity>.title>img[data-v-db6ad4c6]{width:22.31px}.liquidity>.sub-title[data-v-db6ad4c6]{text-align:left;margin:9px 0 11px;color:#666;font-size:14px;line-height:19px}.liquidity>.form[data-v-db6ad4c6]{display:flex;align-items:center;justify-content:space-between;flex-direction:row}.liquidity>.form>.container[data-v-db6ad4c6]{border-radius:10px;padding:19px 0 27px 26px;background:linear-gradient(180deg,#dae5ff,#fff);box-sizing:border-box;border:0 solid #082d7e;box-shadow:0 8px 14px 0 rgba(0,0,0,.3);display:flex;align-items:flex-start;justify-content:center;flex-direction:column}.liquidity>.form>.container>.token[data-v-db6ad4c6]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;color:#3d3d3d;font-size:24px;line-height:32px}.liquidity>.form>.container>.token>.logo[data-v-db6ad4c6]{width:36px;margin-right:14px}.liquidity>.form>.container>.token>.el-icon-caret-bottom[data-v-db6ad4c6]{margin-left:16px;color:#8178c7;font-size:14px;line-height:8.74px}.liquidity>.form>.container>.balance[data-v-db6ad4c6]{margin-top:8px;padding-left:2px;color:#666;font-size:14px;line-height:19px}.liquidity>.form>.container>input[data-v-db6ad4c6]{width:100%;border:none;outline:none;margin-top:13px;font-weight:700;padding-left:2px;background-color:transparent;color:#666;font-size:20px;line-height:27px}.liquidity>.form>img[data-v-db6ad4c6]{width:35.65px;flex-shrink:0;margin:0 8.5px}.liquidity>.label[data-v-db6ad4c6]{margin-top:42px;text-align:left;font-weight:700;color:#333;font-size:14px;line-height:19px}.liquidity>.info[data-v-db6ad4c6]{display:grid;margin-top:14px;border-radius:10px;padding:19px 0 23px;background-color:#181525;grid-template-columns:repeat(3,1fr);background:linear-gradient(180deg,#dae5ff,#fff);box-sizing:border-box;border:0 solid #082d7e;box-shadow:0 8px 14px 0 rgba(0,0,0,.3)}.liquidity>.info>div[data-v-db6ad4c6]{color:#666;font-size:14px;line-height:19px;display:flex;align-items:center;justify-content:center;flex-direction:column}.liquidity>.info>div>span[data-v-db6ad4c6]:first-child{margin-bottom:8px;color:#333}.liquidity>button[data-v-db6ad4c6]{width:100%;height:50px;margin-top:35px}.liquidity>button+button[data-v-db6ad4c6]{margin-left:0}@media screen and (max-width:736px){.liquidity[data-v-db6ad4c6]{padding:28px 21px 47px}.liquidity>.title[data-v-db6ad4c6]{font-size:14px;line-height:19px;color:#333}.liquidity>.title>img[data-v-db6ad4c6]{width:14.87px}.liquidity>.sub-title[data-v-db6ad4c6]{font-size:12px;line-height:16px;margin:3px 0 16px;color:#666}.liquidity>.form>.container[data-v-db6ad4c6]{padding:13px 0 23px 9px;background:linear-gradient(180deg,#dae5ff,#fff);box-sizing:border-box;border:0 solid #082d7e;box-shadow:0 8px 14px 0 rgba(0,0,0,.3)}.liquidity>.form>.container>.token[data-v-db6ad4c6]{font-size:16px;line-height:21px;color:#3d3d3d}.liquidity>.form>.container>.token>.logo[data-v-db6ad4c6]{width:24px;margin-right:9px}.liquidity>.form>.container>.token>.el-icon-caret-bottom[data-v-db6ad4c6]{margin-left:10px;font-size:9.51px;line-height:5.94px}.liquidity>.form>.container>.balance[data-v-db6ad4c6]{margin-top:11px;padding-left:1px;font-size:12px;line-height:16px;color:#666}.liquidity>.form>.container>input[data-v-db6ad4c6]{margin-top:15px;padding-left:1px;font-size:16px;line-height:21px;color:#666}.liquidity>.form>img[data-v-db6ad4c6]{width:24.22px;margin:0 6.5px}.liquidity>.label[data-v-db6ad4c6]{margin-top:21px;color:#333}.liquidity>.info[data-v-db6ad4c6]{padding:21px 0 24px;background:linear-gradient(180deg,#dae5ff,#fff);box-sizing:border-box;border:0 solid #082d7e;box-shadow:0 8px 14px 0 rgba(0,0,0,.3)}.liquidity>.info>div[data-v-db6ad4c6]{font-size:12px;line-height:16px;color:#666}.liquidity>.info>div>span[data-v-db6ad4c6]:first-child{margin-bottom:11px;color:#333}.liquidity>button[data-v-db6ad4c6]{margin-top:21px;border-radius:36px}}",""]),t.exports=i},5097:function(t,i,a){"use strict";a("c9d4")},c9d4:function(t,i,a){var e=a("4e25");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=a("499e").default;o("692d5095",e,!0,{sourceMap:!1,shadowMode:!1})},ed61:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"liquidity"},[i("div",{staticClass:"title"},[i("span",[t._v(t._s(t.$t("liquidity.text1")))]),i("img",{staticClass:"click",attrs:{src:a("298d")},on:{click:function(i){return t.$emit("openSetting")}}})]),i("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("liquidity.text2")))]),i("div",{staticClass:"form"},[i("div",{staticClass:"container"},[t._m(0),i("span",{staticClass:"balance"},[t._v(t._s(t.$t("liquidity.text3"))+" "+t._s(t.balance0.toFixed(2)))]),i("input",{attrs:{autofocus:"",type:"text",placeholder:"0.00"},domProps:{value:t.amount0.toFixed(2)},on:{input:t.handleInput0}})]),i("img",{attrs:{src:a("228e")}}),i("div",{staticClass:"container"},[t._m(1),i("span",{staticClass:"balance"},[t._v(t._s(t.$t("liquidity.text3"))+" "+t._s(t.balance1.toFixed(2)))]),i("input",{attrs:{type:"text",placeholder:"0.00"},domProps:{value:t.amount1.toFixed(2)},on:{input:t.handleInput1}})])]),i("div",{staticClass:"label"},[t._v(t._s(t.$t("liquidity.text4")))]),i("div",{staticClass:"info"},[i("div",[i("span",[t._v(t._s(t.priceUSDT.toFixed(6)))]),i("span",[t._v("USDT/CC")])]),i("div",[i("span",[t._v(t._s(t.priceCC.toFixed(6)))]),i("span",[t._v("CC/USDT")])]),i("div",[i("span",[t._v(t._s(t.holdRatio.toFixed(2))+"%")]),i("span",[t._v(t._s(t.$t("liquidity.text5")))])])]),i("el-button",{attrs:{disabled:t.disabled,loading:"trading"===t.tradingStatus},on:{click:t.addLiquidity}},[t._v(t._s(t.btnText))])],1)},o=[function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"token"},[i("img",{staticClass:"logo",attrs:{src:a("7172")}}),i("span",[t._v("CC")])])},function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"token"},[i("img",{staticClass:"logo",attrs:{src:a("0f62")}}),i("span",[t._v("USDT")])])}],s=a("2f62"),n=a("8346"),d={data(){return{balance0:0,balance1:0,allowance0:0,allowance1:0,amount0:"",amount1:"",reserve0:0,reserve1:0,priceUSDT:0,priceCC:0,balanceLP:0,totalSupply:0,tradingStatus:"none",isPC:!Object(n["b"])()}},computed:{...Object(s["b"])(["address","contracts","slippage","deadline","web3"]),holdRatio(){return this.balanceLP<=0||this.totalSupply<=0?0:this.balanceLP.toBN().div(this.totalSupply).times(100).toFixed()},disabled(){return this.amount0<=0||this.amount1<=0||this.amount0.toBN().gt(this.balance0)||this.amount1.toBN().gt(this.balance1)},btnText(){return"trading"===this.tradingStatus?this.$t("liquidity.text7"):this.amount0.toBN().gt(this.allowance0)?this.$t("liquidity.text8",{symbol:"CC"}):this.amount1.toBN().gt(this.allowance1)?this.$t("liquidity.text8",{symbol:"USDT"}):this.amount0.toBN().gt(this.balance0)?this.$t("liquidity.text9",{symbol:"CC"}):this.amount1.toBN().gt(this.balance1)?this.$t("liquidity.text9",{symbol:"USDT"}):this.$t("liquidity.text6")}},created(){this.contracts&&this.getData()},methods:{handleInput0(t){const i=t.target.value;this.amount0=i,this.amount1=i<=0?"":i.toBN().times(this.reserve1).div(this.reserve0).toFixed()},handleInput1(t){const i=t.target.value;this.amount1=i,this.amount0=i<=0?"":i.toBN().times(this.reserve0).div(this.reserve1).toFixed()},approve(){const t=this.amount0.toBN().gt(this.allowance0)?"CCToken":"USDTToken",i=this.amount0.toBN().gt(this.allowance0)?this.amount0:this.amount1,a=this.amount0.toBN().gt(this.allowance0)?"allowance0":"allowance1";this.tradingStatus="trading",this.contracts[t].methods.approve(this.contracts.SwapRouter.options.address,i.toWei()).send({from:this.address}).on("receipt",i=>{this.contracts[t].methods.allowance(this.address,this.contracts.SwapRouter.options.address).call((t,i)=>{t||(this[a]=i.fromWei(),this.tradingStatus="none")})}).on("error",t=>{this.tradingStatus="none",console.error(t)})},async addLiquidity(){if(this.amount0.toBN().gt(this.allowance0)||this.amount1.toBN().gt(this.allowance1))return this.approve();const t=this.amount0.toBN().div(100).times(this.slippage),i=this.amount1.toBN().div(100).times(this.slippage),a=this.amount0.toBN().minus(t).toFixed(),e=this.amount1.toBN().minus(i).toFixed(),o=(await this.web3.eth.getBlock("latest")).timestamp+this.deadline,s=this.contracts.SwapRouter.methods.addLiquidity(this.contracts.CCToken.options.address,this.contracts.USDTToken.options.address,this.amount0.toWei().toFixed(0),this.amount1.toWei().toFixed(0),a.toWei().toFixed(0),e.toWei().toFixed(0),this.address,o);this.tradingStatus="trading",s.call({from:this.address},(t,i)=>{t||s.send({from:this.address}).on("receipt",t=>{this.getData(),this.amount0="",this.amount1="",Object(n["c"])("增加流动性成功！","success"),this.tradingStatus="none"}).on("error",t=>{console.error(t),this.tradingStatus="none"})})},getData(){this.address&&this.userInfo(),this.contracts.SwapRouter.methods.getAmountsOut("1".toWei(),[this.contracts.CCToken.options.address,this.contracts.USDTToken.options.address]).call((t,i)=>{t||(this.priceCC=i[1].fromWei())}),this.contracts.SwapRouter.methods.getAmountsOut("1".toWei(),[this.contracts.USDTToken.options.address,this.contracts.CCToken.options.address]).call((t,i)=>{t||(this.priceUSDT=i[1].fromWei())}),this.contracts.SwapPair.methods.totalSupply().call((t,i)=>{t||(this.totalSupply=i.fromWei())}),this.contracts.CCToken.methods.balanceOf(this.contracts.SwapPair.options.address).call((t,i)=>{t||(this.reserve0=i.fromWei())}),this.contracts.USDTToken.methods.balanceOf(this.contracts.SwapPair.options.address).call((t,i)=>{t||(this.reserve1=i.fromWei())})},userInfo(){this.contracts.CCToken.methods.balanceOf(this.address).call((t,i)=>{t||(this.balance0=i.fromWei())}),this.contracts.CCToken.methods.allowance(this.address,this.contracts.SwapRouter.options.address).call((t,i)=>{t||(this.allowance0=i.fromWei())}),this.contracts.USDTToken.methods.balanceOf(this.address).call((t,i)=>{t||(this.balance1=i.fromWei())}),this.contracts.USDTToken.methods.allowance(this.address,this.contracts.SwapRouter.options.address).call((t,i)=>{t||(this.allowance1=i.fromWei())}),this.contracts.SwapPair.methods.balanceOf(this.address).call((t,i)=>{t||(this.balanceLP=i.fromWei())})}}},r=d,l=r,c=(a("5097"),a("2877")),p=Object(c["a"])(l,e,o,!1,null,"db6ad4c6",null);i["default"]=p.exports}}]);