(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["community"],{"1bc5":function(t,e,i){t.exports=i.p+"img/empty-record.542cf910.svg"},"358a":function(t,e,i){"use strict";i("a0c8")},"553b":function(t,e,i){t.exports=i.p+"img/copy.8d80cd61.svg"},8316:function(t,e,i){t.exports=i.p+"img/team.e7c1c1ea.svg"},8861:function(t,e,i){t.exports=i.p+"img/coin.39a27342.svg"},9360:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("transition",{attrs:{name:"el-fade-in-linear"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"community-history",on:{click:function(e){t.show=!1}}},[e("div",{staticClass:"container",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("communityHistory.text1")))]),e("i",{staticClass:"el-icon-close click",on:{click:function(e){t.show=!1}}})]),e("div",{staticClass:"box"},[e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("communityHistory.text6")))]),e("span"),e("span",[t._v(t._s(t.$t("communityHistory.text5")))])]),e("div",{staticClass:"list"},t._l(t.list,(function(i){return e("div",{staticClass:"list-item"},[e("div",[t._v(t._s(i.amount.toFixed(2)))]),e("span"),e("div",[t._v(t._s(i.time))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.list.length,expression:"!list.length"}],staticClass:"empty"},[e("img",{attrs:{src:i("1bc5")}}),e("span",[t._v(t._s(t.$t("communityHistory.text7")))])])])])])])])},n=[],o=i("2f62"),s=i("8346"),r={data(){return{show:!1,list:[]}},computed:{...Object(o["b"])(["address","contracts"])},created(){this.address&&this.contracts&&this.getData()},methods:{open(){this.show=!0},getData(){this.contracts.DynamicFarm.getPastEvents("TakeReward",{filter:{user:this.address},fromBlock:0}).then(t=>{const e=[];for(let i=0;i<t.length;i++)e.push({amount:t[i].returnValues.reward.fromWei(),time:Object(s["a"])(t[i].returnValues.time),timestamp:Number(t[i].returnValues.time)});this.list=e.sort((t,e)=>e.timestamp-t.timestamp)})}}},d=r,c=d,m=(i("358a"),i("2877")),l=Object(m["a"])(c,a,n,!1,null,"0f555082",null);e["default"]=l.exports},"952a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".community-history[data-v-0f555082]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;flex-direction:row;z-index:1}.community-history>.container[data-v-0f555082]{width:643px;border-radius:20px;background-color:#301b50;border:1px solid #8757fa}.community-history>.container>.title[data-v-0f555082]{height:79px;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:row;color:#fff;font-size:18px;line-height:24px;border-bottom:1px solid #8757fa}.community-history>.container>.title>.el-icon-close[data-v-0f555082]{position:absolute;top:32px;right:36px;color:#fff;font-size:18px;line-height:18px}.community-history>.container>.box[data-v-0f555082]{padding:33px 37px 39px 36px}.community-history>.container>.box>.content[data-v-0f555082]{height:396px;position:relative;border-radius:10px;background-color:#181525}.community-history>.container>.box>.content>.title[data-v-0f555082]{display:grid;height:51.5px;align-items:center;background-color:#201b36;grid-template-columns:repeat(3,1fr);color:#fff;font-size:14px;line-height:19px}.community-history>.container>.box>.content>.list[data-v-0f555082]{height:calc(100% - 51.5px);overflow:hidden auto}.community-history>.container>.box>.content>.list>.list-item[data-v-0f555082]{display:grid;height:51.5px;grid-template-columns:repeat(3,1fr);color:#fff;font-size:14px;align-items:center}.community-history>.container>.box>.content>.empty[data-v-0f555082]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#8178c7;font-size:14px;line-height:19px;display:flex;align-items:center;justify-content:center;flex-direction:column}.community-history>.container>.box>.content>.empty>img[data-v-0f555082]{width:56px;margin-bottom:17px}@media screen and (max-width:736px){.community-history>.container[data-v-0f555082]{width:9.2rem}.community-history>.container>.title[data-v-0f555082]{height:79px;position:relative;display:flex;align-items:center;justify-content:center;flex-direction:row;color:#fff;font-size:18px;line-height:24px;border-bottom:1px solid #8757fa}.community-history>.container>.title>.el-icon-close[data-v-0f555082]{position:absolute;top:32px;right:36px;color:#fff;font-size:18px;line-height:18px}.community-history>.container>.box[data-v-0f555082]{padding:33px 37px 39px 36px}.community-history>.container>.box>.content[data-v-0f555082]{height:396px;position:relative;border-radius:10px;background-color:#181525}.community-history>.container>.box>.content>.title[data-v-0f555082]{display:grid;height:51.5px;align-items:center;background-color:#201b36;grid-template-columns:repeat(3,1fr);color:#fff;font-size:14px;line-height:19px}.community-history>.container>.box>.content>.list[data-v-0f555082]{height:320px;overflow:hidden auto}.community-history>.container>.box>.content>.list>.list-item[data-v-0f555082]{display:grid;height:37px;grid-template-columns:repeat(3,1fr);color:#fff;font-size:14px;align-items:center}.community-history>.container>.box>.content>.empty[data-v-0f555082]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#8178c7;font-size:14px;line-height:19px;display:flex;align-items:center;justify-content:center;flex-direction:column}.community-history>.container>.box>.content>.empty>img[data-v-0f555082]{width:56px;margin-bottom:17px}}",""]),t.exports=e},"9edb":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.community[data-v-1969a0e8]{padding-top:15px}.community>.header[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;padding-right:70px;background-size:575px 348px;background-repeat:no-repeat;background-position:441px -21px;background-image:radial-gradient(rgba(215,29,246,.6),transparent,transparent)}.community>.header>.title[data-v-1969a0e8]{display:flex;align-items:flex-start;justify-content:center;flex-direction:column}.community>.header>.title>h2[data-v-1969a0e8]{font-weight:800;margin-bottom:15px;color:#fff;font-size:30px;line-height:40px}.community>.header>.title>p[data-v-1969a0e8]{width:490px;text-align:left;color:#8178c7;font-size:14px;line-height:19px}.community>.header>img[data-v-1969a0e8]{width:324px}.community>.header>.banner[data-v-1969a0e8]{display:none}.community>.info[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;margin-top:-9px}.community>.info>div[data-v-1969a0e8]{border-radius:20px}.community>.info>div.take-form[data-v-1969a0e8]{width:385px;flex-shrink:0;margin-right:12px;padding:29px 28px;background-color:#301b50;border:1px solid #8757fa}.community>.info>div.take-form>.title[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;color:#e33bed;font-size:14px;line-height:19px}.community>.info>div.take-form>.title>.text[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;font-weight:700;color:#fff;font-size:18px;line-height:24px}.community>.info>div.take-form>.title>.text>img[data-v-1969a0e8]{width:24px;margin-right:9px}.community>.info>div.take-form>.earns[data-v-1969a0e8]{display:grid;margin-top:37px;grid-template-columns:repeat(2,1fr)}.community>.info>div.take-form>.earns>div[data-v-1969a0e8]{display:flex;align-items:center;justify-content:center;flex-direction:column}.community>.info>div.take-form>.earns>div>span[data-v-1969a0e8]:first-child{font-size:26px;line-height:35px;font-weight:700}.community>.info>div.take-form>.earns>div>span[data-v-1969a0e8]:nth-child(2){margin-top:14px;color:#8178c7;font-size:16px;line-height:21px}.community>.info>div.take-form>.earns>div.earn>span[data-v-1969a0e8]:first-child{color:#cc1cf7}.community>.info>div.take-form>.earns>div.earned>span[data-v-1969a0e8]:first-child{color:#28b1f5}.community>.info>div.take-form>button[data-v-1969a0e8]{width:100%;height:50px;margin-top:39px}.community>.info>div.datas[data-v-1969a0e8]{width:100%;padding:50px 0 43px;background-image:linear-gradient(180deg,#5129b1,#4303a5 6%,#167bef)}.community>.info>div.datas>div[data-v-1969a0e8]{display:grid}.community>.info>div.datas>div.powers[data-v-1969a0e8]{grid-template-columns:repeat(2,1fr)}.community>.info>div.datas>div.earns[data-v-1969a0e8]{margin-top:61px;grid-template-columns:repeat(3,1fr)}.community>.info>div.datas>div>div[data-v-1969a0e8]{display:flex;align-items:center;justify-content:center;flex-direction:column}.community>.info>div.datas>div>div>.title[data-v-1969a0e8]{color:#fff;font-size:16px;line-height:21px}.community>.info>div.datas>div>div>.data[data-v-1969a0e8]{margin-top:15px;font-weight:700;color:#28b1f5;font-size:20px;line-height:27px}.community>.info>div.datas>div>div.splint-line[data-v-1969a0e8]{position:relative}.community>.info>div.datas>div>div.splint-line[data-v-1969a0e8]:after{content:"";width:1px;height:55px;position:absolute;right:0;background-color:#7087d2}.community>.team[data-v-1969a0e8]{height:459px;margin-top:13px;border-radius:20px;padding:33px 35px 0 34px;background-color:#301b50;border:1px solid #8757fa}.community>.team>.header[data-v-1969a0e8],.community>.team>.header>.title[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row}.community>.team>.header>.title[data-v-1969a0e8]{color:#fff;font-size:18px;line-height:23px;font-weight:700}.community>.team>.header>.title>img[data-v-1969a0e8]{width:24px;margin-right:16px}.community>.team>.header>.invite-code[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;color:#fff;font-size:16px;line-height:21px}.community>.team>.header>.invite-code>.code-container[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row;margin-left:7px;padding:8px 16px;border-radius:10px;background-color:#000;border:1px solid #cc1cf7;color:#8178c7;font-size:14px;line-height:19px}.community>.team>.header>.invite-code>.code-container>span[data-v-1969a0e8]{width:209px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.community>.team>.header>.invite-code>.code-container>img[data-v-1969a0e8]{width:20.81px;margin-left:14px}.community>.team>.content[data-v-1969a0e8]{height:324px;margin-top:22px;position:relative;border-radius:10px;background-color:#181525}.community>.team>.content>.title[data-v-1969a0e8]{height:50px;display:grid;grid-template-columns:repeat(3,1fr);color:#fff;font-size:14px;line-height:50px;border-bottom:1px solid #15102a}.community>.team>.content>.teams[data-v-1969a0e8]{height:calc(100% - 50px);color:#8178c7;font-size:14px;line-height:19px}.community>.team>.content>.teams>.team-item[data-v-1969a0e8]{height:44px;display:grid;align-items:center;grid-template-columns:repeat(3,1fr)}.community>.team>.content>.teams>.team-item .el-button[data-v-1969a0e8]{padding:8px 18px;line-height:18px;background-image:none;background-color:#40267e;border:1px solid #8757fa}.community>.team>.content>.empty[data-v-1969a0e8]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;flex-direction:column;color:#7087d2;font-size:14px;line-height:19px}.community>.team>.content>.empty>img[data-v-1969a0e8]{width:56px;margin-bottom:17px}.community>.team>.bind-container[data-v-1969a0e8]{width:380px;margin:75px auto 0;color:#fff;font-size:18px;line-height:24px;display:flex;align-items:center;justify-content:center;flex-direction:column}.community>.team>.bind-container>input[data-v-1969a0e8]{width:100%;height:56px;outline:none;margin-top:27px;text-align:center;border-radius:10px;background-color:#000;border:1px solid #cc1cf7;color:#fff;font-size:14px;line-height:19px}.community>.team>.bind-container>input[data-v-1969a0e8]::-moz-placeholder{color:#8178c7}.community>.team>.bind-container>input[data-v-1969a0e8]::placeholder{color:#8178c7}.community>.team>.bind-container>button[data-v-1969a0e8]{width:100%;height:50px;margin-top:33px}@media screen and (max-width:1000px){.community[data-v-1969a0e8]{overflow:hidden;padding:17px 15px 0}.community>.header[data-v-1969a0e8]{padding-right:0;position:relative;background-image:none}.community>.header>.title>h2[data-v-1969a0e8]{font-size:18px;line-height:24px;margin-bottom:8px}.community>.header>.title>p[data-v-1969a0e8]{width:6.5333rem;font-size:12px;line-height:17.6px}.community>.header>img[data-v-1969a0e8]{display:none}.community>.header>.banner[data-v-1969a0e8]{display:block;position:absolute;top:-59px;right:-199px;width:424px;height:263px;text-align:left;padding:81px 0 0 118px;background-size:100% 100%;background-image:radial-gradient(rgba(215,29,246,.6),transparent,transparent);z-index:-1}.community>.header>.banner>img[data-v-1969a0e8]{width:175px}.community>.info[data-v-1969a0e8]{margin-top:42px;flex-direction:column}.community>.info>div.take-form[data-v-1969a0e8]{width:100%;margin-right:0;margin-bottom:14px;padding:28px 21px 38px 18px}.community>.info>div.take-form>.title[data-v-1969a0e8]{font-size:12px;line-height:16px}.community>.info>div.take-form>.title>.text[data-v-1969a0e8]{font-size:14px;line-height:19px}.community>.info>div.take-form>.earns>div>span[data-v-1969a0e8]:nth-child(2){margin-top:12px;font-size:14px;line-height:19px}.community>.info>div.take-form>button[data-v-1969a0e8]{margin-top:25px}.community>.info>div.datas[data-v-1969a0e8]{padding:37px 16px 31px}.community>.info>div.datas>div.powers[data-v-1969a0e8]{grid-template-columns:repeat(2,1fr)}.community>.info>div.datas>div.earns[data-v-1969a0e8]{margin-top:26px;border-radius:10px;row-gap:15px;padding:23px 19px 23px 16px;grid-template-columns:none;grid-template-rows:repeat(3,1fr);background-color:#391bb3}.community>.info>div.datas>div.earns>div[data-v-1969a0e8]{display:flex;align-items:center;justify-content:space-between;flex-direction:row}.community>.info>div.datas>div.earns>div>.data[data-v-1969a0e8]{margin-top:0}.community>.info>div.datas>div.earns>div.splint-line[data-v-1969a0e8]:after{display:none}.community>.info>div.datas>div>div>.title[data-v-1969a0e8]{font-size:12px;line-height:16px}.community>.info>div.datas>div>div>.data[data-v-1969a0e8]{margin-top:8px;font-size:16px;line-height:21px}.community>.info>div.datas>div>div.splint-line[data-v-1969a0e8]:after{height:50px}.community>.team[data-v-1969a0e8]{height:auto;margin-top:15px;padding:26px 22px 43px}.community>.team>.header[data-v-1969a0e8]{align-items:flex-start;flex-direction:column}.community>.team>.header>.title[data-v-1969a0e8]{font-size:14px;line-height:18px}.community>.team>.header>.title>img[data-v-1969a0e8]{margin-right:9px}.community>.team>.header>.invite-code[data-v-1969a0e8]{width:100%;margin-top:30px;align-items:flex-start;flex-direction:column;font-size:14px;line-height:19px}.community>.team>.header>.invite-code>.code-container[data-v-1969a0e8]{width:100%;margin-left:1px;margin-top:12px;padding:8px 10px 8px 13px}.community>.team>.header>.invite-code>.code-container>span[data-v-1969a0e8]{width:5.5733rem;text-align:left}.community>.team>.header>.invite-code>.code-container>img[data-v-1969a0e8]{margin-left:0}.community>.team>.content[data-v-1969a0e8]{height:350px}.community>.team>.content>.title[data-v-1969a0e8]{border:none;height:38.5px;font-size:12px;line-height:38.5px;background-color:#201b36;grid-template-columns:repeat(2,1fr)}.community>.team>.content>.title>span[data-v-1969a0e8]:nth-child(2){display:none}.community>.team>.content>.teams[data-v-1969a0e8]{height:calc(100% - 38.5px);font-size:12px;line-height:16px}.community>.team>.content>.teams>.team-item[data-v-1969a0e8]{height:35px;grid-template-columns:repeat(2,1fr)}.community>.team>.content>.teams>.team-item>span[data-v-1969a0e8]:nth-child(2){display:none}.community>.team>.content>.teams>.team-item .el-button[data-v-1969a0e8]{padding:4px 9px;font-size:12px;line-height:16px}.community>.team>.bind-container[data-v-1969a0e8]{width:100%;margin-top:34px;font-size:14px;line-height:19px}}',""]),t.exports=e},a0c8:function(t,e,i){var a=i("952a");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("5885a506",a,!0,{sourceMap:!1,shadowMode:!1})},e22b:function(t,e,i){"use strict";i("ef68")},e7e1:function(t,e,i){t.exports=i.p+"img/community-banner.3ce37d9e.png"},ef68:function(t,e,i){var a=i("9edb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("6d6acfe6",a,!0,{sourceMap:!1,shadowMode:!1})},f7d6:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"community"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[e("h2",[t._v(t._s(t.$t("community.text1")))]),e("p",[t._v(t._s(t.$t("community.text2")))]),e("p",[t._v(t._s(t.$t("community.text3")))])]),e("img",{attrs:{src:i("e7e1")}}),t._m(0)]),e("div",{staticClass:"info"},[e("div",{staticClass:"take-form"},[e("div",{staticClass:"title"},[e("div",{staticClass:"text"},[e("img",{attrs:{src:i("8861")}}),e("span",[t._v(t._s(t.$t("community.text4")))])]),e("span",{staticClass:"click",on:{click:t.openHistory}},[t._v(t._s(t.$t("community.text5")))])]),e("div",{staticClass:"earns"},[e("div",{staticClass:"earn"},[e("span",[t._v(t._s(t.pendTake.toFixed(2)))]),e("span",[t._v(t._s(t.$t("community.text6")))])]),e("div",{staticClass:"earned"},[e("span",[t._v(t._s(t.taked.toFixed(2)))]),e("span",[t._v(t._s(t.$t("community.text7")))])])]),e("el-button",{attrs:{disabled:t.pendTake<=0,loading:t.isTaking},on:{click:t.takeReward}},[t._v(t._s(t.$t("community.text"+(t.isTaking?22:8))))])],1),e("div",{staticClass:"datas"},[e("div",{staticClass:"powers"},[e("div",{staticClass:"splint-line"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("community.text9")))]),e("span",{staticClass:"data"},[t._v(t._s(t.totalPower.toFixed(2)))])]),e("div",[e("span",{staticClass:"title"},[t._v(t._s(t.$t("community.text10")))]),e("span",{staticClass:"data"},[t._v(t._s(t.myPower.toFixed(2)))])])]),e("div",{staticClass:"earns"},[e("div",{staticClass:"splint-line"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("community.text11")))]),e("span",{staticClass:"data"},[t._v(t._s(t.shareEarn.toFixed(2)))])]),e("div",{staticClass:"splint-line"},[e("span",{staticClass:"title"},[t._v(t._s(t.$t("community.text12")))]),e("span",{staticClass:"data"},[t._v(t._s(t.lNodeShare.toFixed(2)))])]),e("div",[e("span",{staticClass:"title"},[t._v(t._s(t.$t("community.text13")))]),e("span",{staticClass:"data"},[t._v(t._s(t.hNodeShare.toFixed(2)))])])])])]),e("div",{staticClass:"team"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.parentOf,expression:"parentOf"}],staticClass:"header"},[e("div",{staticClass:"title"},[e("img",{attrs:{src:i("8316")}}),e("span",[t._v(t._s(t.$t("community.text14")))])]),e("div",{staticClass:"invite-code"},[e("span",[t._v(t._s(t.$t("community.text15")))]),e("div",{staticClass:"code-container"},[e("span",[t._v(t._s(t.inviteLink))]),e("img",{staticClass:"click",attrs:{src:i("553b")},on:{click:t.copyLink}})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.parentOf,expression:"parentOf"}],staticClass:"content"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(t.$t("community.text16")))]),e("span"),e("span",[t._v(t._s(t.$t("community.text17")))])]),e("div",{staticClass:"teams"},[t._l(t.children,(function(i){return[e("div",{staticClass:"team-item"},[e("span",[t._v(t._s(`${i.address.slice(0,3)}...${i.address.slice(-4)}`))]),e("span"),e("div",[e("span",{directives:[{name:"show",rawName:"v-show",value:i.earn,expression:"item.earn"}]},[t._v(t._s(i.earn?i.earn.toFixed(2):0))]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:!i.earn,expression:"!item.earn"}],attrs:{loading:i.finding},on:{click:function(e){return t.earnOf(i)}}},[t._v(t._s(t.$t("community.text23")))])],1)])]}))],2),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.children.length,expression:"!children.length"}],staticClass:"empty"},[e("img",{attrs:{src:i("1bc5")}}),e("span",[t._v(t._s(t.$t("community.text18")))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.parentOf,expression:"!parentOf"}],staticClass:"bind-container"},[e("span",[t._v(t._s(t.$t("community.text19")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:t.$t("community.text20")},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("el-button",{attrs:{loading:"trading"===t.tradingStatus},on:{click:t.makeRelation}},[t._v(t._s(t.$t("community.text2"+("trading"===t.tradingStatus?2:1))))])],1)]),e("community-history",{ref:"CommunityHistory"})],1)},n=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"banner"},[e("img",{attrs:{src:i("e7e1")}})])}],o=i("5c96"),s=i("2f62"),r=i("8346"),d={components:{[o["Popover"].name]:o["Popover"],"community-history":()=>i.e("community").then(i.bind(null,"9360"))},data(){return{rootAddress:"",value:"",tradingStatus:"none",pendTake:0,taked:0,totalPower:0,myPower:0,shareEarn:0,lNodeShare:0,hNodeShare:0,inviteLink:"",isTaking:!1,children:[]}},computed:{...Object(s["b"])(["parentOf","web3","contracts","address"])},created(){this.$route.query.inviter&&(this.value=this.$route.query.inviter),this.contracts&&this.getData()},methods:{openHistory(){this.$refs.CommunityHistory.open()},copyLink(){this.$copyText(this.inviteLink).then(t=>{Object(r["c"])(this.$t("community.tip3"),"success")},t=>{Object(r["c"])(this.$t("community.tip4"),"error")})},earnOf(t){t.finding=!0,this.contracts.DynamicFarm.methods.earned(t.address).call((e,i)=>{e||(t.earn=i.fromWei(),t.finding=!1,sessionStorage.setItem("teams",JSON.stringify(this.children)))})},takeReward(){const t=this.contracts.DynamicFarm.methods.takeReward();this.isTaking=!0,t.call({from:this.address},(e,i)=>{e?this.isTaking=!1:t.send({from:this.address}).on("receipt",t=>{this.getData(),this.isTaking=!1}).on("error",t=>{console.error(t),this.isTaking=!1})})},getData(){this.address&&this.userInfo(),this.contracts.Family.methods.rootAddress().call((t,e)=>{t||(this.rootAddress=e,this.address.toBN().eq(this.rootAddress.toLowerCase())&&this.$store.commit("setParentOf",this.rootAddress))})},userInfo(){const t=location.href.includes("?")?location.href.split("?")[0]:location.href;this.inviteLink=`${t}?inviter=${this.address}`,this.contracts.DynamicFarm.methods.earned(this.address).call((t,e)=>{t||(this.pendTake=e.fromWei())}),this.contracts.DynamicFarm.methods.userTakedOf(this.address).call((t,e)=>{t||(this.taked=e.fromWei())}),this.contracts.EpochController.methods.getCurrentEpoch().call((t,e)=>{t||(this.contracts.DynamicFarm.methods.shareRewardOfEpoch(e).call((t,e)=>{t||(this.totalPower=e.totalPower.fromWei())}),this.contracts.DynamicFarm.methods.userDataOfEpoch(this.address,e).call((t,e)=>{t||(this.myPower=e.powerT.fromWei())}))}),this.contracts.DynamicFarm.methods.shareEarn(this.address).call((t,e)=>{t||(this.shareEarn=e.fromWei())}),this.contracts.DynamicFarm.methods.lastEpochData(this.address).call((t,e)=>{t||(this.lNodeShare=e.lNodeShare.fromWei(),this.hNodeShare=e.hNodeShare.fromWei())});const e=JSON.parse(sessionStorage.getItem("teams"));this.contracts.Family.methods.childrenOf(this.address).call((t,i)=>{if(!t)if(e)if(i.length===e.length)this.children=e;else{const t=[];for(let a=0;a<i.length;a++){let n=!1;for(let o=0;o<e.length;o++)if(i[a].toBN().eq(e[o].address)){t.push(e[o]),n=!0;break}n||t.push({address:i[a],earn:!1,finding:!1})}this.children=t}else this.children=i.map(t=>({address:t,earn:!1,finding:!1}))})},async makeRelation(){if(!this.web3.utils.isAddress(this.value))return Object(r["c"])(this.$t("community.tip1"),"error");if(this.value!=this.rootAddress){const t=await this.contracts.Family.methods.parentOf(this.value).call();if(t.toBN().lte(0))return Object(r["c"])(this.$t("community.tip2"),"error")}const t=this.contracts.Family.methods.makeRelation(this.value);this.tradingStatus="trading",t.call({from:this.address},(e,i)=>{e||t.send({from:this.address}).on("receipt",t=>{this.$store.commit("setParentOf",this.value),this.getData(),sessionStorage.setItem(this.address.toLowerCase(),this.value),this.tradingStatus="none"}).on("error",t=>{this.tradingStatus="none",console.error(t)})})}}},c=d,m=c,l=(i("e22b"),i("2877")),p=Object(l["a"])(m,a,n,!1,null,"1969a0e8",null);e["default"]=p.exports}}]);